<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="2.1" xmlns:xmi="http://schema.omg.org/spec/XMI/2.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:CDA="http://www.openhealthtools.org/mdht/schemas/cda/4" xmlns:Ecore="http://www.eclipse.org/uml2/schemas/Ecore/5" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/3.0.0/UML" xsi:schemaLocation="http://www.eclipse.org/uml2/schemas/Ecore/5 pathmap://UML_PROFILES/Ecore.profile.uml#_z1OFcHjqEdy8S4Cr8Rc_NA">
  <uml:Package xmi:id="_0j1PQEavEeGFfbgNCOW4yA" name="mtm">
    <packageImport xmi:id="_0qiUMEavEeGFfbgNCOW4yA">
      <importedPackage href="../../org.openhealthtools.mdht.uml.cda/model/cda.uml#_ii81kjxVEd6JwqSGecoePg"/>
    </packageImport>
    <packageImport xmi:id="_0qiUMUavEeGFfbgNCOW4yA">
      <importedPackage href="../../org.openhealthtools.mdht.uml.hl7.datatypes/model/datatypes.uml#_XgMSwzxVEd6JwqSGecoePg"/>
    </packageImport>
    <packageImport xmi:id="_0qiUMkavEeGFfbgNCOW4yA">
      <importedPackage href="../../org.openhealthtools.mdht.uml.cda.mtm.model/model/mtm-vocab.uml#_0kR7MEavEeGFfbgNCOW4yA"/>
    </packageImport>
    <packageImport xmi:id="_HUBs8EayEeGFfbgNCOW4yA">
      <importedPackage href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2B30sBSVEeGGzu7fmW9pXw"/>
    </packageImport>
    <packagedElement xmi:type="uml:Class" xmi:id="_0naHsUavEeGFfbgNCOW4yA" name="MTM">
      <ownedRule xmi:id="_BTYfQUw7EeGrDvEN9YqHUQ" name="GeneralHeaderConstraintsTemplateId" constrainedElement="_0naHsUavEeGFfbgNCOW4yA">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfQkw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.templateId->exists(id : datatypes::II | id.root = '')</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTYfREw7EeGrDvEN9YqHUQ" name="MTMAllergiesSection" constrainedElement="_0naHsUavEeGFfbgNCOW4yA">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfRUw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.getAllSections()->one(section : cda::Section | not section.oclIsUndefined() and section.oclIsKindOf(consol::AllergiesSection))</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTYfS0w7EeGrDvEN9YqHUQ" name="MTMMedicationsSection" constrainedElement="_0naHsUavEeGFfbgNCOW4yA">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfTEw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.getAllSections()->one(section : cda::Section | not section.oclIsUndefined() and section.oclIsKindOf(mtm::MTMMedicationSection))</body>
        </specification>
      </ownedRule>
      <generalization xmi:id="_15elkEwrEeGrDvEN9YqHUQ">
        <general xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2DNRcBSVEeGGzu7fmW9pXw"/>
      </generalization>
      <ownedOperation xmi:id="_BTYfRkw7EeGrDvEN9YqHUQ" name="getAllergiesSection" isQuery="true" bodyCondition="_BTYfSUw7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTYfSUw7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTYfRkw7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfSkw7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getAllSections()->select(section : cda::Section | not section.oclIsUndefined() and section.oclIsKindOf(consol::AllergiesSection))->asSequence()->first().oclAsType(consol::AllergiesSection)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTYfR0w7EeGrDvEN9YqHUQ" direction="return">
          <type xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2LMIwBSVEeGGzu7fmW9pXw"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTYfSEw7EeGrDvEN9YqHUQ" value="1"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:id="_BTYfTUw7EeGrDvEN9YqHUQ" name="getMedicationsSection" isQuery="true" bodyCondition="_BTYfUEw7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTYfUEw7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTYfTUw7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfUUw7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getAllSections()->select(section : cda::Section | not section.oclIsUndefined() and section.oclIsKindOf(mtm::MTMMedicationSection))->asSequence()->first().oclAsType(mtm::MTMMedicationSection)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTYfTkw7EeGrDvEN9YqHUQ" type="_AyXL8EwyEeGrDvEN9YqHUQ" direction="return">
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTYfT0w7EeGrDvEN9YqHUQ" value="1"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_yhegQEwxEeGrDvEN9YqHUQ" name="MTMMedicationActivity">
      <ownedRule xmi:id="_BTYfUkw7EeGrDvEN9YqHUQ" name="MTMMedicationActivityText" constrainedElement="_yhegQEwxEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfU0w7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>(self.text.oclIsUndefined() or self.text.isNullFlavorUndefined()) implies (not self.text.oclIsUndefined())</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTYfVUw7EeGrDvEN9YqHUQ" name="MTMMedicationActivityIndication" constrainedElement="_yhegQEwxEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfVkw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.entryRelationship->exists(entryRelationship : cda::EntryRelationship | not entryRelationship.observation.oclIsUndefined() and entryRelationship.observation.oclIsKindOf(consol::Indication) and entryRelationship.typeCode = vocab::x_ActRelationshipEntryRelationship::RSON)</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTiQRkw7EeGrDvEN9YqHUQ" name="MTMMedicationActivityInstructions" constrainedElement="_yhegQEwxEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQR0w7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.entryRelationship->one(entryRelationship : cda::EntryRelationship | not entryRelationship.act.oclIsUndefined() and entryRelationship.act.oclIsKindOf(consol::Instructions) and entryRelationship.typeCode = vocab::x_ActRelationshipEntryRelationship::SUBJ)</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTiQTUw7EeGrDvEN9YqHUQ" name="MTMMedicationActivityAuthor" constrainedElement="_yhegQEwxEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQTkw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.author->one(author : cda::Author | not author.oclIsUndefined() and author.oclIsKindOf(rim::Participation))</body>
        </specification>
      </ownedRule>
      <ownedRule xmi:id="_BTiQT0w7EeGrDvEN9YqHUQ" name="MTMMedicationActivityComment" constrainedElement="_yhegQEwxEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQUEw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.entryRelationship->one(entryRelationship : cda::EntryRelationship | not entryRelationship.act.oclIsUndefined() and entryRelationship.act.oclIsKindOf(consol::Comment) and entryRelationship.typeCode = vocab::x_ActRelationshipEntryRelationship::RSON)</body>
        </specification>
      </ownedRule>
      <generalization xmi:id="_yhfHUEwxEeGrDvEN9YqHUQ">
        <general xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2GHbgBSVEeGGzu7fmW9pXw"/>
      </generalization>
      <ownedOperation xmi:id="_BTYfV0w7EeGrDvEN9YqHUQ" name="getmtmIndications" isQuery="true" bodyCondition="_BTYfWkw7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTYfWkw7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTYfV0w7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfW0w7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getObservations()->select(observation : cda::Observation | not observation.oclIsUndefined() and observation.oclIsKindOf(consol::Indication)).oclAsType(consol::Indication)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTYfWEw7EeGrDvEN9YqHUQ" direction="return">
          <type xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_sHrUoBUSEeG6PvUxSTZnaw"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTYfWUw7EeGrDvEN9YqHUQ" value="*"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:id="_BTiQSEw7EeGrDvEN9YqHUQ" name="getmtmInstructions" isQuery="true" bodyCondition="_BTiQS0w7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTiQS0w7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTiQSEw7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQTEw7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getActs()->select(act : cda::Act | not act.oclIsUndefined() and act.oclIsKindOf(consol::Instructions))->asSequence()->first().oclAsType(consol::Instructions)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTiQSUw7EeGrDvEN9YqHUQ" direction="return">
          <type xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2G8h9RSVEeGGzu7fmW9pXw"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTiQSkw7EeGrDvEN9YqHUQ" value="1"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation xmi:id="_BTiQUUw7EeGrDvEN9YqHUQ" name="getComment" isQuery="true" bodyCondition="_BTiQVEw7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTiQVEw7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTiQUUw7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQVUw7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getActs()->select(act : cda::Act | not act.oclIsUndefined() and act.oclIsKindOf(consol::Comment))->asSequence()->first().oclAsType(consol::Comment)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTiQUkw7EeGrDvEN9YqHUQ" direction="return">
          <type xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2FhloBSVEeGGzu7fmW9pXw"/>
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTiQU0w7EeGrDvEN9YqHUQ" value="1"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <packagedElement xmi:type="uml:Class" xmi:id="_AyXL8EwyEeGrDvEN9YqHUQ" name="MTMMedicationSection">
      <ownedRule xmi:id="_BTYfXEw7EeGrDvEN9YqHUQ" name="MTMMedicationSectionMedication" constrainedElement="_AyXL8EwyEeGrDvEN9YqHUQ">
        <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTYfXUw7EeGrDvEN9YqHUQ">
          <language>OCL</language>
          <body>self.entry->exists(entry : cda::Entry | not entry.substanceAdministration.oclIsUndefined() and entry.substanceAdministration.oclIsKindOf(mtm::MTMMedicationActivity))</body>
        </specification>
      </ownedRule>
      <generalization xmi:id="_AyXzAEwyEeGrDvEN9YqHUQ">
        <general xmi:type="uml:Class" href="../../org.openhealthtools.mdht.uml.cda.consol/model/consol_Ecore.uml#_2NIpgBSVEeGGzu7fmW9pXw"/>
      </generalization>
      <ownedOperation xmi:id="_BTiQQUw7EeGrDvEN9YqHUQ" name="getmtmMedications" isQuery="true" bodyCondition="_BTiQREw7EeGrDvEN9YqHUQ">
        <ownedRule xmi:id="_BTiQREw7EeGrDvEN9YqHUQ" name="body" constrainedElement="_BTiQQUw7EeGrDvEN9YqHUQ">
          <specification xmi:type="uml:OpaqueExpression" xmi:id="_BTiQRUw7EeGrDvEN9YqHUQ">
            <language>OCL</language>
            <body>self.getSubstanceAdministrations()->select(substanceAdministration : cda::SubstanceAdministration | not substanceAdministration.oclIsUndefined() and substanceAdministration.oclIsKindOf(mtm::MTMMedicationActivity)).oclAsType(mtm::MTMMedicationActivity)</body>
          </specification>
        </ownedRule>
        <ownedParameter xmi:id="_BTiQQkw7EeGrDvEN9YqHUQ" type="_yhegQEwxEeGrDvEN9YqHUQ" direction="return">
          <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_BTiQQ0w7EeGrDvEN9YqHUQ" value="*"/>
        </ownedParameter>
      </ownedOperation>
    </packagedElement>
    <profileApplication xmi:id="_0j1PQUavEeGFfbgNCOW4yA">
      <eAnnotations xmi:id="_0j1PQkavEeGFfbgNCOW4yA" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="pathmap://UML_PROFILES/Standard.profile.uml#_yzU58YinEdqtvbnfB2L_5w"/>
      </eAnnotations>
      <appliedProfile href="pathmap://UML_PROFILES/Standard.profile.uml#_0"/>
    </profileApplication>
    <profileApplication xmi:id="_0j1PQ0avEeGFfbgNCOW4yA">
      <eAnnotations xmi:id="_0j1PREavEeGFfbgNCOW4yA" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="http://www.openhealthtools.org/mdht/schemas/cda/4#/"/>
      </eAnnotations>
      <appliedProfile href="pathmap://CDA_PROFILES/CDA.profile.uml#_cxOJEIEVEd6H8o-hO3-B4Q"/>
    </profileApplication>
    <profileApplication xmi:id="_BTOuQEw7EeGrDvEN9YqHUQ">
      <eAnnotations xmi:id="_BTOuQUw7EeGrDvEN9YqHUQ" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="pathmap://UML_PROFILES/Ecore.profile.uml#_z1OFcHjqEdy8S4Cr8Rc_NA"/>
      </eAnnotations>
      <appliedProfile href="pathmap://UML_PROFILES/Ecore.profile.uml#_0"/>
    </profileApplication>
  </uml:Package>
  <CDA:CodegenSupport xmi:id="_0naHsEavEeGFfbgNCOW4yA" basePackage="org.openhealthtools.mdht.uml.cda" nsPrefix="mtm" nsURI="http://www.openhealthtools.org/mdht/uml/cda/mtm" packageName="mtm" prefix="mtm" base_Namespace="_0j1PQEavEeGFfbgNCOW4yA"/>
  <CDA:CDATemplate xmi:id="_0naHskavEeGFfbgNCOW4yA" base_Class="_0naHsUavEeGFfbgNCOW4yA" templateId="" assigningAuthorityName=""/>
  <Ecore:EPackage xmi:id="_BTOuQkw7EeGrDvEN9YqHUQ" base_Package="_0j1PQEavEeGFfbgNCOW4yA" packageName="mtm" nsPrefix="mtm" nsURI="http://www.openhealthtools.org/mdht/uml/cda/mtm" basePackage="org.openhealthtools.mdht.uml.cda" prefix="mtm"/>
  <CDA:ConformsTo xmi:id="_BTYfQEw7EeGrDvEN9YqHUQ" base_Generalization="_15elkEwrEeGrDvEN9YqHUQ"/>
  <Ecore:EClass xmi:id="_BTYfQ0w7EeGrDvEN9YqHUQ" base_Class="_0naHsUavEeGFfbgNCOW4yA">
    <annotation>http://www.openhealthtools.org/mdht/uml/cda/annotation templateId.root='' constraints.validation.error='MTMTemplateId MTMAllergiesSection MTMMedicationsSection'</annotation>
  </Ecore:EClass>
  <Ecore:EClass xmi:id="_BTYfVEw7EeGrDvEN9YqHUQ" base_Class="_yhegQEwxEeGrDvEN9YqHUQ">
    <annotation>http://www.openhealthtools.org/mdht/uml/cda/annotation constraints.validation.error='MTMMedicationActivityIndication MTMMedicationActivityInstructions MTMMedicationActivityAuthor' constraints.validation.warning='MTMMedicationActivityText' constraints.validation.info='MTMMedicationActivityComment'</annotation>
  </Ecore:EClass>
  <Ecore:EClass xmi:id="_BTiQQEw7EeGrDvEN9YqHUQ" base_Class="_AyXL8EwyEeGrDvEN9YqHUQ">
    <annotation>http://www.openhealthtools.org/mdht/uml/cda/annotation constraints.validation.error='MTMMedicationSectionMedication'</annotation>
  </Ecore:EClass>
</xmi:XMI>
